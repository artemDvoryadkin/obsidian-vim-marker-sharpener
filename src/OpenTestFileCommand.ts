import { App, TFile, Notice, MarkdownView, Command } from 'obsidian';
import { SharpenerCommand } from './Commons/types';

export class OpenTestFileCommand extends SharpenerCommand {
	id = 'open-vimrc';
	name = 'Open Vimrc';
	prefix = '`fo';
	command: Command;

	async execute(app: App): Promise<void> {
		const filePath = '07.Meta/obsidian_vimrc.md';
		const file = app.vault.getAbstractFileByPath(filePath);

		if (file instanceof TFile) {
			const leaf = app.workspace.getLeaf('split');
			await leaf.openFile(file);
			await app.workspace.setActiveLeaf(leaf);
			const activeView = await app.workspace.getActiveViewOfType(MarkdownView);

			if (activeView) {
				const editor = activeView.editor;
				editor.setCursor(0, 0);
				editor.focus();
			}
		} else {
			new Notice('File not found: ' + filePath);
		}
	}
} 